jQuery(function(t){function a(){var a=new i(t("[data-social-curator-post-grid]"));a.init()}function o(t,a){}t(document).ready(function(){var t=new SocialCuratorNonce;t.injectNonce(a)});var i=function(a,i){var n=this;n.o={el:a,btn:t("[data-load-more-posts]"),loading:t("[data-social-curator-grid-loading]"),offset:0,numberposts:parseInt(social_curator_grid.perpage),masonry:"true"==social_curator_grid.masonry?!0:!1,columns:social_curator_grid.masonrycolumns?social_curator_grid.masonrycolumns:"two",completetext:social_curator_grid.completetext,footer:t("[data-social-curator-grid-footer]")},n.init=function(){n.o.masonry&&(t(n.o.el).addClass("masonry-grid"),t(n.o.el).addClass(n.o.columns)),n.bindEvents(),n.getPosts()},n.bindEvents=function(){t(n.o.btn).on("click",function(t){t.preventDefault(),n.getPosts()})},n.getPosts=function(){n.loading(!0),t.ajax({url:social_curator.ajaxurl,type:"POST",data:{nonce:social_curator_nonce,action:"social_curator_get_posts",offset:n.o.offset,number:n.o.numberposts},success:function(t){n.o.offset=n.o.offset+n.o.numberposts,n.loadPosts(t.posts)}})},n.loadPosts=function(a){for(var i=0;i<a.length;i++){var r=new e,s=r.format(a[i]);n.o.masonry?n.applyMasonry(s):t(n.o.el).append(s),o(a[i],s)}return a.length<n.o.numberposts?n.noPosts():void n.loading(!1)},n.noPosts=function(){n.loading(!1),t(n.o.btn).remove(),t(n.o.footer).text(n.o.completetext)},n.loading=function(a){return a?(t(n.o.loading).show(),void t(n.o.btn).attr("disabled","disabled").html(social_curator_grid.loading).addClass("loading")):(t(n.o.loading).hide(),void t(n.o.btn).attr("disabled",!1).html(social_curator_grid.loadmore).removeClass("loading"))},n.applyMasonry=function(a){var o=t(n.o.el).masonry({itemSelector:"[data-template]",percentPosition:!0,gutter:".gutter-sizer"});o.imagesLoaded(function(){o.masonry()}),a&&o.append(a).masonry("appended",a)}},e=function(){var a=this;a.template=t("[data-single-post-template]").find("[data-template]"),a.format=function(o){var i=t(a.template).clone();if(t(i).attr("data-post-container-id",o.id),t(i).addClass(o.site),t(i).find("[data-icon-link]").html(o.icon_link),t(i).find("[data-profile-image]").html('<img src="'+o.profile_image_link+'" data-profile-image class="social-curator-profile-image" onerror="this.onerror=null;this.src=\''+social_curator_grid.defaultavatar+"';\">"),t(i).find("[data-profile-link]").attr("href",o.profile_link),t(i).find("[data-profile-name]").text(o.profile_name),t(i).find("[data-date]").text(o.date),t(i).find("[data-post-content]").html(o.content),t(i).find("[data-site]").text(o.site),t(i).find("[data-link]").attr("href",o.link),t(i).find("[data-icon]").attr("class",social_curator_grid.iconprefix+o.site),o.thumbnail){var e='<a href="'+o.link+'"><img src="'+o.thumbnail+'" /></a>';t(i).find("[data-thumbnail]").html(e)}if("1"===social_curator_grid.twitterintents&&"twitter"===o.site){var r=new n;i=r.append(o,i)}return i}},n=function(){var a=this;a.template=t("[data-twitter-intents-template]").find("[data-single-intent-template]"),a.append=function(o,i){var e=t(a.template).clone().appendTo(i);return t(e).find("[data-intent-retweet]").html('<a href="https://twitter.com/intent/retweet?tweet_id='+o.original_id+'"><i class="'+social_curator_grid.iconprefix+'loop"></i></a>'),t(e).find("[data-intent-favorite]").html('<a href="https://twitter.com/intent/favorite?tweet_id='+o.original_id+'"><i class="'+social_curator_grid.iconprefix+'star-full"></i></a>'),t(e).find("[data-intent-tweet]").html('<a href="https://twitter.com/intent/tweet?in_reply_to='+o.original_id+'"><i class="'+social_curator_grid.iconprefix+'redo2"></i></a>'),i}}});