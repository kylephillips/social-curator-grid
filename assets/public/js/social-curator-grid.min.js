jQuery(function(t){function a(){var a=new i(t("[data-social-curator-post-grid]"));a.init()}function o(t,a){}t(document).ready(function(){var t=new SocialCuratorNonce;t.injectNonce(a)});var i=function(a,i){var e=this;e.o={el:a,btn:t("[data-load-more-posts]"),loading:t("[data-social-curator-grid-loading]"),offset:0,numberposts:parseInt(social_curator_grid.perpage),masonry:"true"==social_curator_grid.masonry?!0:!1,columns:social_curator_grid.masonrycolumns?social_curator_grid.masonrycolumns:"two",completetext:social_curator_grid.completetext,footer:t("[data-social-curator-grid-footer]")},e.init=function(){e.o.masonry&&(t(e.o.el).addClass("masonry-grid"),t(e.o.el).addClass(e.o.columns)),e.bindEvents(),e.getPosts()},e.bindEvents=function(){t(e.o.btn).on("click",function(t){t.preventDefault(),e.getPosts()})},e.getPosts=function(){e.loading(!0),t.ajax({url:social_curator.ajaxurl,type:"POST",data:{nonce:social_curator_nonce,action:"social_curator_get_posts",offset:e.o.offset,number:e.o.numberposts},success:function(t){return 0==t.posts.length?e.noPosts():(e.o.offset=e.o.offset+e.o.numberposts,void e.loadPosts(t.posts))}})},e.loadPosts=function(a){for(var i=0;i<a.length;i++){var r=new n,s=r.format(a[i]);e.o.masonry?e.applyMasonry(s):t(e.o.el).append(s),o(a[i],s)}e.loading(!1)},e.noPosts=function(){e.loading(!1),t(e.o.btn).remove(),t(e.o.footer).text(e.o.completetext)},e.loading=function(a){return a?(t(e.o.loading).show(),void t(e.o.btn).attr("disabled","disabled").html(social_curator_grid.loading).addClass("loading")):(t(e.o.loading).hide(),void t(e.o.btn).attr("disabled",!1).html(social_curator_grid.loadmore).removeClass("loading"))},e.applyMasonry=function(a){var o=t(e.o.el).masonry({itemSelector:"[data-template]",percentPosition:!0,gutter:".gutter-sizer"});o.imagesLoaded(function(){o.masonry()}),a&&o.append(a).masonry("appended",a)}},n=function(){var a=this;a.template=t("[data-single-post-template]").find("[data-template]"),a.format=function(o){var i=t(a.template).clone();if(t(i).attr("data-post-container-id",o.id),t(i).addClass(o.site),t(i).find("[data-icon-link]").html(o.icon_link),t(i).find("[data-profile-image]").attr("src",o.profile_image_link),t(i).find("[data-profile-link]").attr("href",o.profile_link),t(i).find("[data-profile-name]").text(o.profile_name),t(i).find("[data-date]").text(o.date),t(i).find("[data-post-content]").html(o.content),t(i).find("[data-site]").text(o.site),t(i).find("[data-link]").attr("href",o.link),t(i).find("[data-icon]").attr("class",social_curator_grid.iconprefix+o.site),o.thumbnail){var n='<a href="'+o.link+'"><img src="'+o.thumbnail+'" /></a>';t(i).find("[data-thumbnail]").html(n)}if("1"===social_curator_grid.twitterintents&&"twitter"===o.site){var r=new e;i=r.append(o,i)}return i}},e=function(){var a=this;a.template=t("[data-twitter-intents-template]").find("[data-single-intent-template]"),a.append=function(o,i){var n=t(a.template).clone().appendTo(i);return t(n).find("[data-intent-retweet]").html('<a href="https://twitter.com/intent/retweet?tweet_id='+o.original_id+'"><i class="'+social_curator_grid.iconprefix+'loop"></i></a>'),t(n).find("[data-intent-favorite]").html('<a href="https://twitter.com/intent/favorite?tweet_id='+o.original_id+'"><i class="'+social_curator_grid.iconprefix+'star-full"></i></a>'),t(n).find("[data-intent-tweet]").html('<a href="https://twitter.com/intent/tweet?in_reply_to='+o.original_id+'"><i class="'+social_curator_grid.iconprefix+'redo2"></i></a>'),i}}});