jQuery(function(t){t(document).ready(function(){function a(){var a=new o(t("[data-social-curator-post-grid]"));a.init()}var n=new SocialCuratorNonce;n.injectNonce(a)});var o=function(o,n){var i=this;i.o={el:o,btn:t("[data-load-more-posts]"),loading:t("[data-social-curator-grid-loading]"),offset:0,numberposts:parseInt(social_curator_grid.perpage),masonry:"true"==social_curator_grid.masonry?!0:!1,columns:social_curator_grid.masonrycolumns?social_curator_grid.masonrycolumns:"two",completetext:social_curator_grid.completetext,footer:t("[data-social-curator-grid-footer]")},i.init=function(){i.o.masonry&&(t(i.o.el).addClass("masonry-grid"),t(i.o.el).addClass(i.o.columns)),i.bindEvents(),i.getPosts()},i.bindEvents=function(){t(i.o.btn).on("click",function(t){t.preventDefault(),i.getPosts()})},i.getPosts=function(){i.loading(!0),t.ajax({url:social_curator.ajaxurl,type:"POST",data:{nonce:social_curator_nonce,action:"social_curator_get_posts",offset:i.o.offset,number:i.o.numberposts},success:function(t){return 0==t.posts.length?i.noPosts():(i.o.offset=i.o.offset+i.o.numberposts,void i.loadPosts(t.posts))}})},i.loadPosts=function(o){for(var n=0;n<o.length;n++){var e=new a,r=e.format(o[n]);i.o.masonry?i.applyMasonry(r):t(i.o.el).append(r)}i.loading(!1)},i.noPosts=function(){i.loading(!1),t(i.o.btn).remove(),t(i.o.footer).text(i.o.completetext)},i.loading=function(o){return o?(t(i.o.loading).show(),void t(i.o.btn).attr("disabled","disabled").html(social_curator_grid.loading).addClass("loading")):(t(i.o.loading).hide(),void t(i.o.btn).attr("disabled",!1).html(social_curator_grid.loadmore).removeClass("loading"))},i.applyMasonry=function(o){var a=t(i.o.el).masonry({itemSelector:"[data-template]",percentPosition:!0,gutter:".gutter-sizer"});a.imagesLoaded(function(){a.masonry()}),o&&a.append(o).masonry("appended",o)}},a=function(){var o=this;o.template=t("[data-single-post-template]").find("[data-template]"),o.format=function(a){var n=t(o.template).clone();if(t(n).attr("data-post-container-id",a.id),t(n).find("[data-icon-link]").html(a.icon_link),t(n).find("[data-profile-image]").attr("src",a.profile_image_link),t(n).find("[data-profile-link]").attr("href",a.profile_link),t(n).find("[data-profile-name]").text(a.profile_name),t(n).find("[data-date]").text(a.date),t(n).find("[data-post-content]").html(a.content),t(n).find("[data-site]").text(a.site),t(n).find("[data-link]").attr("href",a.link),t(n).find("[data-icon]").attr("class",social_curator_grid.iconprefix+a.site),a.thumbnail){var i='<a href="'+a.link+'"><img src="'+a.thumbnail+'" /></a>';t(n).find("[data-thumbnail]").html(i)}return n}}});