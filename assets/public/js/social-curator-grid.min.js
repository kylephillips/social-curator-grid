jQuery(function(t){function o(){var o=new n(t("[data-social-curator-post-grid]"));o.init()}function a(t,o){}t(document).ready(function(){var t=new SocialCuratorNonce;t.injectNonce(o)});var n=function(o,n){var e=this;e.o={el:o,btn:t("[data-load-more-posts]"),loading:t("[data-social-curator-grid-loading]"),offset:0,numberposts:parseInt(social_curator_grid.perpage),masonry:"true"==social_curator_grid.masonry?!0:!1,columns:social_curator_grid.masonrycolumns?social_curator_grid.masonrycolumns:"two",completetext:social_curator_grid.completetext,footer:t("[data-social-curator-grid-footer]")},e.init=function(){e.o.masonry&&(t(e.o.el).addClass("masonry-grid"),t(e.o.el).addClass(e.o.columns)),e.bindEvents(),e.getPosts()},e.bindEvents=function(){t(e.o.btn).on("click",function(t){t.preventDefault(),e.getPosts()})},e.getPosts=function(){e.loading(!0),t.ajax({url:social_curator.ajaxurl,type:"POST",data:{nonce:social_curator_nonce,action:"social_curator_get_posts",offset:e.o.offset,number:e.o.numberposts},success:function(t){return 0==t.posts.length?e.noPosts():(e.o.offset=e.o.offset+e.o.numberposts,void e.loadPosts(t.posts))}})},e.loadPosts=function(o){for(var n=0;n<o.length;n++){var r=new i,s=r.format(o[n]);e.o.masonry?e.applyMasonry(s):t(e.o.el).append(s),a(o[n],s)}e.loading(!1)},e.noPosts=function(){e.loading(!1),t(e.o.btn).remove(),t(e.o.footer).text(e.o.completetext)},e.loading=function(o){return o?(t(e.o.loading).show(),void t(e.o.btn).attr("disabled","disabled").html(social_curator_grid.loading).addClass("loading")):(t(e.o.loading).hide(),void t(e.o.btn).attr("disabled",!1).html(social_curator_grid.loadmore).removeClass("loading"))},e.applyMasonry=function(o){var a=t(e.o.el).masonry({itemSelector:"[data-template]",percentPosition:!0,gutter:".gutter-sizer"});a.imagesLoaded(function(){a.masonry()}),o&&a.append(o).masonry("appended",o)}},i=function(){var o=this;o.template=t("[data-single-post-template]").find("[data-template]"),o.format=function(a){var n=t(o.template).clone();if(t(n).attr("data-post-container-id",a.id),t(n).addClass(a.site),t(n).find("[data-icon-link]").html(a.icon_link),t(n).find("[data-profile-image]").attr("src",a.profile_image_link),t(n).find("[data-profile-link]").attr("href",a.profile_link),t(n).find("[data-profile-name]").text(a.profile_name),t(n).find("[data-date]").text(a.date),t(n).find("[data-post-content]").html(a.content),t(n).find("[data-site]").text(a.site),t(n).find("[data-link]").attr("href",a.link),t(n).find("[data-icon]").attr("class",social_curator_grid.iconprefix+a.site),a.thumbnail){var i='<a href="'+a.link+'"><img src="'+a.thumbnail+'" /></a>';t(n).find("[data-thumbnail]").html(i)}return n}}});