function social_curator_grid_post_preloaded(t,e){}function social_curator_grid_post_loaded(t,e){}!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(o,i){return e(t,o,i)}):"object"==typeof exports?module.exports=e(t,require("wolfy87-eventemitter"),require("eventie")):t.imagesLoaded=e(t,t.EventEmitter,t.eventie)}(window,function(t,e,o){"use strict";function i(t,e){for(var o in e)t[o]=e[o];return t}function n(t){return"[object Array]"===u.call(t)}function r(t){var e=[];if(n(t))e=t;else if("number"==typeof t.length)for(var o=0,i=t.length;i>o;o++)e.push(t[o]);else e.push(t);return e}function a(t,e,o){if(!(this instanceof a))return new a(t,e);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=r(t),this.options=i({},this.options),"function"==typeof e?o=e:i(this.options,e),o&&this.on("always",o),this.getImages(),d&&(this.jqDeferred=new d.Deferred);var n=this;setTimeout(function(){n.check()})}function s(t){this.img=t}function c(t){this.src=t,p[t]=this}var d=t.jQuery,l=t.console,f="undefined"!=typeof l,u=Object.prototype.toString;a.prototype=new e,a.prototype.options={},a.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;e>t;t++){var o=this.elements[t];"IMG"===o.nodeName&&this.addImage(o);var i=o.nodeType;if(i&&(1===i||9===i||11===i))for(var n=o.querySelectorAll("img"),r=0,a=n.length;a>r;r++){var s=n[r];this.addImage(s)}}},a.prototype.addImage=function(t){var e=new s(t);this.images.push(e)},a.prototype.check=function(){function t(t,n){return e.options.debug&&f&&l.log("confirm",t,n),e.progress(t),o++,o===i&&e.complete(),!0}var e=this,o=0,i=this.images.length;if(this.hasAnyBroken=!1,!i)return void this.complete();for(var n=0;i>n;n++){var r=this.images[n];r.on("confirm",t),r.check()}},a.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t),e.jqDeferred&&e.jqDeferred.notify&&e.jqDeferred.notify(e,t)})},a.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var e=this;setTimeout(function(){if(e.emit(t,e),e.emit("always",e),e.jqDeferred){var o=e.hasAnyBroken?"reject":"resolve";e.jqDeferred[o](e)}})},d&&(d.fn.imagesLoaded=function(t,e){var o=new a(this,t,e);return o.jqDeferred.promise(d(this))}),s.prototype=new e,s.prototype.check=function(){var t=p[this.img.src]||new c(this.img.src);if(t.isConfirmed)return void this.confirm(t.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var e=this;t.on("confirm",function(t,o){return e.confirm(t.isLoaded,o),!0}),t.check()},s.prototype.confirm=function(t,e){this.isLoaded=t,this.emit("confirm",this,e)};var p={};return c.prototype=new e,c.prototype.check=function(){if(!this.isChecked){var t=new Image;o.bind(t,"load",this),o.bind(t,"error",this),t.src=this.src,this.isChecked=!0}},c.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},c.prototype.onload=function(t){this.confirm(!0,"onload"),this.unbindProxyEvents(t)},c.prototype.onerror=function(t){this.confirm(!1,"onerror"),this.unbindProxyEvents(t)},c.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},c.prototype.unbindProxyEvents=function(t){o.unbind(t.target,"load",this),o.unbind(t.target,"error",this)},a}),jQuery(function(t){t(document).ready(function(){function t(){var t=new e(jQuery("[data-social-curator-post-grid]"));t.init()}var o=new SocialCuratorNonce;o.injectNonce(t)});var e=function(e,i){var n=this;n.o={el:e,btn:t("[data-load-more-posts]"),loading:t("[data-social-curator-grid-loading]"),offset:0,numberposts:parseInt(social_curator_grid.perpage),masonry:"true"==social_curator_grid.masonry?!0:!1,columns:social_curator_grid.masonrycolumns?social_curator_grid.masonrycolumns:"two",completetext:social_curator_grid.completetext,footer:t("[data-social-curator-grid-footer]")},n.init=function(){n.o.masonry&&(t(n.o.el).addClass("masonry-grid"),t(n.o.el).addClass(n.o.columns)),n.bindEvents(),n.getPosts()},n.bindEvents=function(){t(n.o.btn).on("click",function(t){t.preventDefault(),n.getPosts()})},n.getPosts=function(){n.loading(!0),t.ajax({url:social_curator.ajaxurl,type:"POST",data:{nonce:social_curator_nonce,action:"social_curator_get_posts",offset:n.o.offset,number:n.o.numberposts},success:function(t){n.o.offset=n.o.offset+n.o.numberposts,n.loadPosts(t.posts)}})},n.loadPosts=function(e){for(var i=0;i<e.length;i++){var r=new o,a=r.format(e[i]);n.o.masonry?n.applyMasonry(a):t(n.o.el).append(a),social_curator_grid_post_loaded(e[i],a)}return e.length<n.o.numberposts?n.noPosts():void n.loading(!1)},n.noPosts=function(){n.loading(!1),t(n.o.btn).remove(),t(n.o.footer).text(n.o.completetext)},n.loading=function(e){return e?(t(n.o.loading).show(),void t(n.o.btn).attr("disabled","disabled").html(social_curator_grid.loading).addClass("loading")):(t(n.o.loading).hide(),void t(n.o.btn).attr("disabled",!1).html(social_curator_grid.loadmore).removeClass("loading"))},n.applyMasonry=function(e){var o=t(n.o.el).masonry({itemSelector:"[data-template]",percentPosition:!0,gutter:".gutter-sizer"});o.imagesLoaded(function(){o.masonry()}),e&&o.append(e).masonry("appended",e)}},o=function(){var e=this;e.template=t("[data-single-post-template]").find("[data-template]"),e.format=function(o){var n=t(e.template).clone();if(t(n).attr("data-post-container-id",o.id),t(n).addClass(o.site),t(n).find("[data-icon-link]").html(o.icon_link),t(n).find("[data-profile-image]").html('<img src="'+o.profile_image_link+'" data-profile-image class="social-curator-profile-image" onerror="this.onerror=null;this.src=\''+social_curator_grid.defaultavatar+"';\">"),t(n).find("[data-profile-link]").attr("href",o.profile_link),t(n).find("[data-profile-name]").text(o.profile_name),t(n).find("[data-date]").text(o.date),t(n).find("[data-post-content]").html(o.content),t(n).find("[data-site]").text(o.site),t(n).find("[data-link]").attr("href",o.link),t(n).find("[data-icon]").attr("class",social_curator_grid.iconprefix+o.site),o.thumbnail){var r='<a href="'+o.link+'"><img src="'+o.thumbnail+'" /></a>';t(n).find("[data-thumbnail]").html(r)}if("1"===social_curator_grid.twitterintents&&"twitter"===o.site){var a=new i;n=a.append(o,n)}return social_curator_grid_post_preloaded(n,o),n}},i=function(){var e=this;e.template=t("[data-twitter-intents-template]").find("[data-single-intent-template]"),e.append=function(o,i){var n=t(e.template).clone().appendTo(i);return t(n).find("[data-intent-retweet]").html('<a href="https://twitter.com/intent/retweet?tweet_id='+o.original_id+'"><i class="'+social_curator_grid.iconprefix+'loop"></i></a>'),t(n).find("[data-intent-favorite]").html('<a href="https://twitter.com/intent/favorite?tweet_id='+o.original_id+'"><i class="'+social_curator_grid.iconprefix+'star-full"></i></a>'),t(n).find("[data-intent-tweet]").html('<a href="https://twitter.com/intent/tweet?in_reply_to='+o.original_id+'"><i class="'+social_curator_grid.iconprefix+'redo2"></i></a>'),i}}});