function social_curator_grid_post_preloaded(t,e){}function social_curator_grid_post_loaded(t,e){}function social_curator_masonry_callback(t){}function social_curator_grid_all_posts_loaded(t){}!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(i,o){return e(t,i,o)}):"object"==typeof exports?module.exports=e(t,require("wolfy87-eventemitter"),require("eventie")):t.imagesLoaded=e(t,t.EventEmitter,t.eventie)}(window,function(t,e,i){"use strict";function o(t,e){for(var i in e)t[i]=e[i];return t}function n(t){return"[object Array]"===u.call(t)}function r(t){var e=[];if(n(t))e=t;else if("number"==typeof t.length)for(var i=0,o=t.length;o>i;i++)e.push(t[i]);else e.push(t);return e}function a(t,e,i){if(!(this instanceof a))return new a(t,e);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=r(t),this.options=o({},this.options),"function"==typeof e?i=e:o(this.options,e),i&&this.on("always",i),this.getImages(),d&&(this.jqDeferred=new d.Deferred);var n=this;setTimeout(function(){n.check()})}function s(t){this.img=t}function c(t){this.src=t,m[t]=this}var d=t.jQuery,l=t.console,f="undefined"!=typeof l,u=Object.prototype.toString;a.prototype=new e,a.prototype.options={},a.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;e>t;t++){var i=this.elements[t];"IMG"===i.nodeName&&this.addImage(i);var o=i.nodeType;if(o&&(1===o||9===o||11===o))for(var n=i.querySelectorAll("img"),r=0,a=n.length;a>r;r++){var s=n[r];this.addImage(s)}}},a.prototype.addImage=function(t){var e=new s(t);this.images.push(e)},a.prototype.check=function(){function t(t,n){return e.options.debug&&f&&l.log("confirm",t,n),e.progress(t),i++,i===o&&e.complete(),!0}var e=this,i=0,o=this.images.length;if(this.hasAnyBroken=!1,!o)return void this.complete();for(var n=0;o>n;n++){var r=this.images[n];r.on("confirm",t),r.check()}},a.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t),e.jqDeferred&&e.jqDeferred.notify&&e.jqDeferred.notify(e,t)})},a.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var e=this;setTimeout(function(){if(e.emit(t,e),e.emit("always",e),e.jqDeferred){var i=e.hasAnyBroken?"reject":"resolve";e.jqDeferred[i](e)}})},d&&(d.fn.imagesLoaded=function(t,e){var i=new a(this,t,e);return i.jqDeferred.promise(d(this))}),s.prototype=new e,s.prototype.check=function(){var t=m[this.img.src]||new c(this.img.src);if(t.isConfirmed)return void this.confirm(t.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var e=this;t.on("confirm",function(t,i){return e.confirm(t.isLoaded,i),!0}),t.check()},s.prototype.confirm=function(t,e){this.isLoaded=t,this.emit("confirm",this,e)};var m={};return c.prototype=new e,c.prototype.check=function(){if(!this.isChecked){var t=new Image;i.bind(t,"load",this),i.bind(t,"error",this),t.src=this.src,this.isChecked=!0}},c.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},c.prototype.onload=function(t){this.confirm(!0,"onload"),this.unbindProxyEvents(t)},c.prototype.onerror=function(t){this.confirm(!1,"onerror"),this.unbindProxyEvents(t)},c.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},c.prototype.unbindProxyEvents=function(t){i.unbind(t.target,"load",this),i.unbind(t.target,"error",this)},a});var postgrid;jQuery(function(t){t(document).ready(function(){function t(){postgrid=new e(jQuery("[data-social-curator-post-grid]")),postgrid.init()}var i=new SocialCuratorNonce;i.injectNonce(t)});var e=function(e,o){var n=this;n.o={el:e,btn:t("[data-load-more-posts]"),loading:t("[data-social-curator-grid-loading]"),offset:0,numberposts:parseInt(social_curator_grid.perpage),masonry:"true"==social_curator_grid.masonry?!0:!1,columns:social_curator_grid.masonrycolumns?social_curator_grid.masonrycolumns:"two",completetext:social_curator_grid.completetext,footer:t("[data-social-curator-grid-footer]"),thumbnailsonly:"true"===social_curator_grid.thumbnailsonly?!0:!1,thumbnailsize:social_curator_grid.thumbnailsize},n.init=function(){n.o.masonry&&(n.masonry_instance=new Masonry(n.o.el[0],{itemSelector:"[data-template]",percentPosition:!0,gutter:".gutter-sizer"}),t(n.o.el).addClass("masonry-grid"),t(n.o.el).addClass(n.o.columns)),n.bindEvents(),n.getPosts()},n.bindEvents=function(){t(n.o.btn).on("click",function(t){t.preventDefault(),n.getPosts()})},n.getPosts=function(){n.loading(!0),t.ajax({url:social_curator.ajaxurl,type:"POST",data:{nonce:social_curator_nonce,action:"social_curator_get_posts",offset:n.o.offset,number:n.o.numberposts,thumbnailsonly:n.o.thumbnailsonly,thumbnailsize:n.o.thumbnailsize},success:function(t){n.o.offset=n.o.offset+n.o.numberposts,n.loadPosts(t.posts)}})},n.loadPosts=function(e){for(var o=0;o<e.length;o++){var r=new i,a=r.format(e[o]);n.o.masonry?(t(n.o.el).append(a),n.masonry_instance.appended(a)):t(n.o.el).append(a)}return e.length<n.o.numberposts?n.noPosts():(n.loading(!1),void(n.o.masonry&&n.o.el.imagesLoaded(function(){n.masonry_instance.on("layoutComplete",function(t){social_curator_grid_all_posts_loaded(t)}),n.masonry_instance.layout()})))},n.noPosts=function(){n.loading(!1),t(n.o.btn).remove(),t(n.o.footer).text(n.o.completetext)},n.loading=function(e){return e?(t(n.o.loading).show(),void t(n.o.btn).attr("disabled","disabled").html(social_curator_grid.loading).addClass("loading")):(t(n.o.loading).hide(),void t(n.o.btn).attr("disabled",!1).html(social_curator_grid.loadmore).removeClass("loading"))}},i=function(){var e=this;e.template=t("[data-single-post-template]").find("[data-template]"),e.format=function(i){var n=t(e.template).clone();if(t(n).attr("data-post-container-id",i.id),t(n).addClass(i.site),t(n).find("[data-icon-link]").html(i.icon_link),t(n).find("[data-profile-image]").html('<img src="'+i.profile_image_link+'" data-profile-image class="social-curator-profile-image" onerror="this.onerror=null;this.src=\''+social_curator_grid.defaultavatar+"';\">"),t(n).find("[data-profile-link]").attr("href",i.profile_link),t(n).find("[data-profile-name]").text(i.profile_name),t(n).find("[data-date]").text(i.date),t(n).find("[data-post-content]").html(i.content),t(n).find("[data-site]").text(i.site),t(n).find("[data-link]").attr("href",i.link),t(n).find("[data-icon]").attr("class",social_curator_grid.iconprefix+i.site),i.thumbnail){var r='<a href="'+i.link+'"><img src="'+i.thumbnail+'" /></a>';t(n).find("[data-thumbnail]").html(r)}if("1"===social_curator_grid.twitterintents&&"twitter"===i.site){var a=new o;n=a.append(i,n)}return social_curator_grid_post_preloaded(n,i),n}},o=function(){var e=this;e.template=t("[data-twitter-intents-template]").find("[data-single-intent-template]"),e.append=function(i,o){var n=t(e.template).clone().appendTo(o);t(n).find("[data-intent-retweet]").html('<a href="https://twitter.com/intent/retweet?tweet_id='+i.original_id+'"><i class="'+social_curator_grid.iconprefix+'loop"></i></a>');var r=t(n).find("[data-intent-favorite]");return t(n).find("[data-intent-favorite]").html(t(r).hasClass("heart")?'<a href="https://twitter.com/intent/favorite?tweet_id='+i.original_id+'"><i class="'+social_curator_grid.iconprefix+'heart"></i></a>':'<a href="https://twitter.com/intent/favorite?tweet_id='+i.original_id+'"><i class="'+social_curator_grid.iconprefix+'star-full"></i></a>'),t(n).find("[data-intent-tweet]").html('<a href="https://twitter.com/intent/tweet?in_reply_to='+i.original_id+'"><i class="'+social_curator_grid.iconprefix+'redo2"></i></a>'),o}}});